(function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t():"function"===typeof define&&define.amd?define([],t):"object"===typeof exports?exports["laravel-blame"]=t():e["laravel-blame"]=t()})("undefined"!==typeof self?self:this,(()=>(()=>{"use strict";var e={};(()=>{e.d=(t,i)=>{for(var n in i)e.o(i,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:i[n]})}})(),(()=>{e.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})(),(()=>{e.p=""})();var t={};if(e.d(t,{default:()=>p}),"undefined"!==typeof window){var i=window.document.currentScript,n=i&&i.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);n&&(e.p=n[1])}var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"w-full"},[t("label",{staticClass:"block text-sm font-bold"},[e._v("Laravel Blame")]),t("small",{staticClass:"mb-2"},[e._v("Select the Entities to set as Blamable, ")]),e.pluginData&&e.projetcEntities.length>0?t("div",{staticClass:"mt-5"},[t("label",{staticClass:"block text-sm font-bold mb-2"},[e._v("Project Entities")]),t("div",{staticClass:"form-check mb-3"},[t("label",{staticClass:"inline-flex items-center",attrs:{for:"selectAllCruds"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.pluginData.allSelected,expression:"pluginData.allSelected"}],staticClass:"form-checkbox",attrs:{type:"checkbox",id:"selectAllCruds"},domProps:{checked:Array.isArray(e.pluginData.allSelected)?e._i(e.pluginData.allSelected,null)>-1:e.pluginData.allSelected},on:{change:[function(t){var i=e.pluginData.allSelected,n=t.target,a=!!n.checked;if(Array.isArray(i)){var s=null,l=e._i(i,s);n.checked?l<0&&e.$set(e.pluginData,"allSelected",i.concat([s])):l>-1&&e.$set(e.pluginData,"allSelected",i.slice(0,l).concat(i.slice(l+1)))}else e.$set(e.pluginData,"allSelected",a)},e.selectAllData]}}),t("span",{staticClass:"ml-2 text-gray-800 dark:text-gray-300"},[e._v("Select All-")])])]),e.pluginData.entities&&Object.keys(e.pluginData.entities).length>0?e._l(e.projetcEntities,(function(i){return t("div",{key:"entity"+i.id,staticClass:"bg-gray-100 dark:bg-gray-700 border border-gray-300 dark:border-gray-900 p-2 rounded-md my-3"},[t("div",{staticClass:"form-check"},[t("label",{staticClass:"inline-flex items-center text-gray-800",attrs:{for:i.id}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.pluginData.entities[i.id]["selected"],expression:"pluginData.entities[entity.id]['selected']"}],staticClass:"form-checkbox",attrs:{type:"checkbox",id:i.id},domProps:{checked:Array.isArray(e.pluginData.entities[i.id]["selected"])?e._i(e.pluginData.entities[i.id]["selected"],null)>-1:e.pluginData.entities[i.id]["selected"]},on:{change:[function(t){var n=e.pluginData.entities[i.id]["selected"],a=t.target,s=!!a.checked;if(Array.isArray(n)){var l=null,o=e._i(n,l);a.checked?o<0&&e.$set(e.pluginData.entities[i.id],"selected",n.concat([l])):o>-1&&e.$set(e.pluginData.entities[i.id],"selected",n.slice(0,o).concat(n.slice(o+1)))}else e.$set(e.pluginData.entities[i.id],"selected",s)},function(t){return e.toggleCrudData(i)}]}}),t("span",{staticClass:"ml-2 text-gray-800 dark:text-gray-100"},[e._v(e._s(i.name))])])])])})):[t("p",[e._v("Loading entities or no entities found in plugin data...")])]],2):e._e()])},s=[];const l={data(){return{projetcEntities:[],pluginData:{entities:{},allSelected:!1}}},created(){this.pluginConsole=window.vemtoApi.pluginConsole,this.pluginConsole.log("creating plugin instance"),this.pluginData=window.vemtoApi.getPluginData(),this.pluginData||(this.pluginData={}),this.pluginData.entities&&!Array.isArray(this.pluginData.entities)||(this.pluginData.entities={}),this.projetcEntities=window.vemtoApi.getProject()?.entities||[],this.pluginConsole.log(window.vemtoApi.getProject().entities),this.checkNewProjectEntities(),this.pluginConsole.log("Plugin Intance Created")},methods:{checkNewProjectEntities(){this.pluginConsole.log("Checking project entities"),this.projetcEntities&&0!==this.projetcEntities.length||(this.projetcEntities=window.vemtoApi.getProject()?.entities||[]),this.pluginData.entities||(this.pluginData.entities={}),this.projetcEntities.forEach((e=>{let t={id:e.id,name:e.name,selected:this.pluginData.entities[e.id]?.selected??!1};try{this.pluginData.entities[e.id]||(this.$set(this.pluginData.entities,e.id,t),this.pluginConsole.log(`Added new entity to plugin data: ${e.name}`))}catch(i){this.pluginConsole.error(i)}})),this.pluginConsole.log("check finished"),this.save()},toggleCrudData(e){this.pluginConsole.log("boolean"===this.pluginData.entities[e.id]["selected"]),this.pluginConsole.log(`before Toggled entity: ${e.name} - ${!0===this.pluginData.entities[e.id]["selected"]}`),this.pluginData.entities&&this.pluginData.entities[e.id]?("boolean"===typeof this.pluginData.entities[e.id]["selected"]?this.pluginData.entities[e.id]["selected"]=!this.pluginData.entities[e.id]["selected"]:this.pluginData.entities[e.id]["selected"]=!0,this.save()):this.pluginConsole.error(`Attempted to toggle non-existent entity: ${e.id}`),this.pluginConsole.log(`Toggled entity: ${e.name} - ${this.pluginData.entities[e.id]["selected"]}`)},selectAllData(){const e=this.pluginData.allSelected;Object.keys(this.pluginData.entities).forEach((t=>{this.pluginData.entities[t].selected=e})),this.save()},save:window.vemtoApi.debounce((function(){this.pluginConsole.log("Saving plugin data"),window.vemtoApi.savePluginData({entities:this.pluginData.entities,allSelected:this.pluginData.allSelected??!1}),this.pluginConsole.log("Saved plugin data")}),300)}},o=l;function c(e,t,i,n,a,s,l,o){var c,r="function"===typeof e?e.options:e;if(t&&(r.render=t,r.staticRenderFns=i,r._compiled=!0),n&&(r.functional=!0),s&&(r._scopeId="data-v-"+s),l?(c=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),a&&a.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(l)},r._ssrRegister=c):a&&(c=o?function(){a.call(this,(r.functional?this.parent:this).$root.$options.shadowRoot)}:a),c)if(r.functional){r._injectStyles=c;var d=r.render;r.render=function(e,t){return c.call(t),d(e,t)}}else{var p=r.beforeCreate;r.beforeCreate=p?[].concat(p,c):[c]}return{exports:e,options:r}}var r=c(o,a,s,!1,null,null,null);const d=r.exports,p=d;return t=t["default"],t})()));
//# sourceMappingURL=laravel-blame.umd.min.js.map